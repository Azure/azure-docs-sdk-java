### YamlMime:JavaMember
uid: "com.azure.storage.queue.QueueClientBuilder.processMessageDecodingErrorAsync*"
fullName: "com.azure.storage.queue.QueueClientBuilder.processMessageDecodingErrorAsync"
name: "processMessageDecodingErrorAsync"
nameWithType: "QueueClientBuilder.processMessageDecodingErrorAsync"
members:
- uid: "com.azure.storage.queue.QueueClientBuilder.processMessageDecodingErrorAsync(java.util.function.Function<com.azure.storage.queue.models.QueueMessageDecodingError,reactor.core.publisher.Mono<java.lang.Void>>)"
  fullName: "com.azure.storage.queue.QueueClientBuilder.processMessageDecodingErrorAsync(Function<QueueMessageDecodingError,Mono<Void>> processMessageDecodingErrorAsyncHandler)"
  name: "processMessageDecodingErrorAsync(Function<QueueMessageDecodingError,Mono<Void>> processMessageDecodingErrorAsyncHandler)"
  nameWithType: "QueueClientBuilder.processMessageDecodingErrorAsync(Function<QueueMessageDecodingError,Mono<Void>> processMessageDecodingErrorAsyncHandler)"
  summary: "Sets the asynchronous handler that performs the tasks needed when a message is received or peaked from the queue but cannot be decoded.\n\nSuch message can be received or peaked when queue is expecting certain <xref uid=\"com.azure.storage.queue.QueueMessageEncoding\" data-throw-if-not-resolved=\"false\" data-raw-source=\"QueueMessageEncoding\"></xref> but there's another producer that is not encoding messages in expected way. I.e. the queue contains messages with different encoding.\n\n<xref uid=\"com.azure.storage.queue.models.QueueMessageDecodingError\" data-throw-if-not-resolved=\"false\" data-raw-source=\"QueueMessageDecodingError\"></xref> contains <xref uid=\"com.azure.storage.queue.QueueAsyncClient\" data-throw-if-not-resolved=\"false\" data-raw-source=\"QueueAsyncClient\"></xref> for the queue that has received the message as well as <xref uid=\"com.azure.storage.queue.models.QueueMessageDecodingError.getQueueMessageItem()\" data-throw-if-not-resolved=\"false\" data-raw-source=\"QueueMessageDecodingError#getQueueMessageItem()\"></xref> or <xref uid=\"com.azure.storage.queue.models.QueueMessageDecodingError.getPeekedMessageItem()\" data-throw-if-not-resolved=\"false\" data-raw-source=\"QueueMessageDecodingError#getPeekedMessageItem()\"></xref> with raw body, i.e. no decoding will be attempted so that body can be inspected as has been received from the queue.\n\nThe handler won't attempt to remove the message from the queue. Therefore such handling should be included into handler itself.\n\n**Code Samples**\n\n```java\nString connectionString = \"DefaultEndpointsProtocol=https;AccountName={name};\"\n     + \"AccountKey={key};EndpointSuffix={core.windows.net}\";\n\n Function<QueueMessageDecodingError, Mono<Void>> processMessageDecodingErrorHandler =\n     (queueMessageDecodingFailure) -> {\n         QueueMessageItem queueMessageItem = queueMessageDecodingFailure.getQueueMessageItem();\n         PeekedMessageItem peekedMessageItem = queueMessageDecodingFailure.getPeekedMessageItem();\n         if (queueMessageItem != null) {\n             System.out.printf(\"Received badly encoded message, messageId=%s, messageBody=%s\",\n                 queueMessageItem.getMessageId(),\n                 queueMessageItem.getBody().toString());\n             return queueMessageDecodingFailure\n                 .getQueueAsyncClient()\n                 .deleteMessage(queueMessageItem.getMessageId(), queueMessageItem.getPopReceipt());\n         } else if (peekedMessageItem != null) {\n             System.out.printf(\"Peeked badly encoded message, messageId=%s, messageBody=%s\",\n                 peekedMessageItem.getMessageId(),\n                 peekedMessageItem.getBody().toString());\n             return Mono.empty();\n         } else {\n             return Mono.empty();\n         }\n     };\n\n QueueClient client = new QueueClientBuilder()\n     .connectionString(connectionString)\n     .processMessageDecodingErrorAsync(processMessageDecodingErrorHandler)\n     .buildClient();\n```"
  parameters:
  - description: "the handler."
    name: "processMessageDecodingErrorAsyncHandler"
    type: "<xref href=\"java.util.function.Function?alt=java.util.function.Function&text=Function\" data-throw-if-not-resolved=\"False\" />&lt;<xref href=\"com.azure.storage.queue.models.QueueMessageDecodingError?alt=com.azure.storage.queue.models.QueueMessageDecodingError&text=QueueMessageDecodingError\" data-throw-if-not-resolved=\"False\" />,<xref href=\"reactor.core.publisher.Mono?alt=reactor.core.publisher.Mono&text=Mono\" data-throw-if-not-resolved=\"False\" />&lt;<xref href=\"java.lang.Void?alt=java.lang.Void&text=Void\" data-throw-if-not-resolved=\"False\" />&gt;&gt;"
  syntax: "public QueueClientBuilder processMessageDecodingErrorAsync(Function<QueueMessageDecodingError,Mono<Void>> processMessageDecodingErrorAsyncHandler)"
  returns:
    description: "the updated QueueClientBuilder object"
    type: "<xref href=\"com.azure.storage.queue.QueueClientBuilder?alt=com.azure.storage.queue.QueueClientBuilder&text=QueueClientBuilder\" data-throw-if-not-resolved=\"False\" />"
type: "method"
metadata: {}
package: "com.azure.storage.queue"
artifact: com.azure:azure-storage-queue:12.12.0
