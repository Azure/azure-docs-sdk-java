### YamlMime:JavaPackage
uid: "com.azure.monitor.ingestion"
fullName: "com.azure.monitor.ingestion"
name: "com.azure.monitor.ingestion"
summary: "The Azure Monitor Ingestion client library is used to send custom logs to an <a href=\"https://learn.microsoft.com/azure/azure-monitor/overview\">Azure Monitor</a>\n Log Analytics workspace."
classes:
- "com.azure.monitor.ingestion.LogsIngestionAsyncClient"
- "com.azure.monitor.ingestion.LogsIngestionClient"
- "com.azure.monitor.ingestion.LogsIngestionClientBuilder"
enums:
- "com.azure.monitor.ingestion.LogsIngestionServiceVersion"
desc: "The Azure Monitor Ingestion client library is used to send custom logs to an <a href=\"https://learn.microsoft.com/azure/azure-monitor/overview\">Azure Monitor</a>\n Log Analytics workspace.\n\n <h2>Getting Started</h2>\n\n <h3>Prerequisites</h3>\n\n <p>The client library requires the following:</p>\n\n <ul>\n     <li>Java 8 or later</li>\n     <li>An Azure subscription</li>\n     <li>An existing Azure Monitor Data Collection Rule</li>\n     <li>An existing Azure Monitor Data Collection Endpoint</li>\n     <li>An existing Azure Monitor Log Analytics workspace</li>\n </ul>\n\n <hr/>\n\n <h3>Authenticate a Client</h3>\n\n <p>\n     The <xref uid=\"com.azure.monitor.ingestion.LogsIngestionClient\" data-throw-if-not-resolved=\"false\" data-raw-source=\"LogIngestionClient\"></xref> and\n     <xref uid=\"com.azure.monitor.ingestion.LogsIngestionAsyncClient\" data-throw-if-not-resolved=\"false\" data-raw-source=\"LogIngestionAsyncClient\"></xref> can be authenticated\n     using Microsoft Entra ID. To authenticate with Microsoft Entra ID, create a\n     <xref uid=\"com.azure.core.credential.TokenCredential\" data-throw-if-not-resolved=\"false\" data-raw-source=\"TokenCredential\"></xref> that can be passed to the\n     <xref uid=\"com.azure.monitor.ingestion.LogsIngestionClientBuilder\" data-throw-if-not-resolved=\"false\" data-raw-source=\"LogIngestionClientBuilder\"></xref>. The Azure Identity\n     library provides implementations of <xref uid=\"com.azure.core.credential.TokenCredential\" data-throw-if-not-resolved=\"false\" data-raw-source=\"TokenCredential\"></xref> for\n     multiple authentication flows. See <xref uid=\"com.azure.core.credential.TokenCredential\" data-throw-if-not-resolved=\"false\" data-raw-source=\"TokenCredential\"></xref> for multiple\n     authentication flows. See <a href=\"https://learn.microsoft.com/java/api/overview/azure/identity-readme?view=azure-java-stable\">Azure Identity</a>\n     <a href=\"https://learn.microsoft.com/java/api/overview/azure/identity-readme?view=azure-java-stable\">Azure Identity</a>\n     for more information. See <xref uid=\"com.azure.monitor.ingestion.LogsIngestionClientBuilder\" data-throw-if-not-resolved=\"false\" data-raw-source=\"LogIngestionClientBuilder\"></xref> for more examples on authenticating a client.\n </p>\n\n <p>\n     The following sample demonstrates how to create a <xref uid=\"com.azure.monitor.ingestion.LogsIngestionClient\" data-throw-if-not-resolved=\"false\" data-raw-source=\"LogIngestionClient\"></xref>\n     using <xref uid=\"com.azure.monitor.ingestion.LogsIngestionClientBuilder\" data-throw-if-not-resolved=\"false\" data-raw-source=\"LogIngestionClientBuilder\"></xref> and TokenCredential authentication.\n </p>\n\n <!-- src_embed com.azure.monitor.ingestion.LogsIngestionClient.instantiation -->\n <pre>\n LogsIngestionClient logsIngestionClient = new LogsIngestionClientBuilder&#40;&#41;\n         .credential&#40;tokenCredential&#41;\n         .endpoint&#40;&quot;&lt;data-collection-endpoint&gt;&quot;&#41;\n         .buildClient&#40;&#41;;\n </pre>\n <!-- end com.azure.monitor.ingestion.LogsIngestionClient.instantiation -->\n\n <hr/>\n\n <h2>Overview</h2>\n\n <p>\n     The Logs Ingestion REST API in Azure Monitor lets you send data to a Log Analytics workspace.\n     The API allows you to send data to <a href=\"https://learn.microsoft.com/azure/azure-monitor/logs/logs-ingestion-api-overview#supported-tables\">supported tables</a>\n     or to custom tables that you create. You can\n     also extend the schema of Azure tables with custom columns to accept additional data.\n </p>\n\n <p>\n     The Azure Monitor Ingestion client library provides both synchronous and asynchronous client implementations,\n     providing you the capability to send custom logs to an Azure Monitor Log Analytics workspace.\n </p>\n\n <hr/>\n\n <h3>Key Concepts</h3>\n\n <p><strong>Data Collection Endpoint</strong></p>\n\n <p>\n     Data Collection Endpoints (DCEs) allow you to uniquely configure ingestion settings for Azure Monitor.\n     <a href=\"https://learn.microsoft.com/azure/azure-monitor/essentials/data-collection-endpoint-overview?tabs=portal\">This article</a>\n     provides an overview of data collection endpoints including their contents and structure and how you can create and work with them.\n </p>\n\n <p><strong>Data Collection Rule</strong></p>\n\n <p>\n     Data collection rules (DCR) define data collected by Azure Monitor and specify how and where that data should be sent\n     or stored. The REST API call must specify a DCR to use. A single DCE can support multiple DCRs, so you can specify a different DCR for different sources and target tables.\n </p>\n\n <p>\n     The DCR must understand the structure of the input data and the structure of the target table. If the two don't match,\n     it can use a transformation to convert the source data to match the target table. You may also use the transform\n     to filter source data and perform any other calculations or conversions.\n </p>\n\n <p>\n     For more details, see <a href=\"https://learn.microsoft.com/azure/azure-monitor/essentials/data-collection-rule-overview\">Data collection rules</a>\n     in Azure Monitor. For information on how to retrieve a DCR ID,\n     <a href=\"https://learn.microsoft.com/azure/azure-monitor/logs/tutorial-logs-ingestion-portal#collect-information-from-the-dcr\">see this tutorial</a>.\n </p>\n\n <p><strong>Log Analytics Workspace Tables</strong></p>\n\n <p>\n     Custom logs can send data to any custom table that you create and to\n     <a href=\"https://learn.microsoft.com/azure/azure-monitor/logs/logs-ingestion-api-overview#supported-tables\">certain built-in tables</a>\n     in your Log Analytics workspace. The target table must exist before you can send data to it.\n </p>\n\n <p><strong>Logs retrieval</strong></p>\n\n <p>\n     The logs that were uploaded using this library can be queried using the\n     <a href=\"https://github.com/Azure/azure-sdk-for-java/tree/main/sdk/monitor/azure-monitor-query#readme\">Azure Monitor Query client library</a>.\n </p>\n\n <hr/>\n\n <h2>Client Usage</h2>\n\n <h3>\n     Uploading logs to Azure Monitor\n </h3>\n\n <p>\n     The following sample demonstrates how to upload logs to Azure Monitor using\n     <xref uid=\"com.azure.monitor.ingestion.LogsIngestionClient\" data-throw-if-not-resolved=\"false\" data-raw-source=\"LogIngestionClient\"></xref>.\n </p>\n\n <!-- src_embed com.azure.monitor.ingestion.LogsIngestionClient.upload -->\n <pre>\n List&lt;Object&gt; logs = getLogs&#40;&#41;;\n logsIngestionClient.upload&#40;&quot;&lt;data-collection-rule-id&gt;&quot;, &quot;&lt;stream-name&gt;&quot;, logs&#41;;\n System.out.println&#40;&quot;Logs uploaded successfully&quot;&#41;;\n </pre>\n <!-- end com.azure.monitor.ingestion.LogsIngestionClient.upload -->\n\n <p>\n     For more synchronous and asynchronous client usage information, see <xref uid=\"com.azure.monitor.ingestion.LogsIngestionClient\" data-throw-if-not-resolved=\"false\" data-raw-source=\"com.azure.monitor.ingestion.LogsIngestionClient\"></xref> and\n     <xref uid=\"com.azure.monitor.ingestion.LogsIngestionAsyncClient\" data-throw-if-not-resolved=\"false\" data-raw-source=\"com.azure.monitor.ingestion.LogsIngestionAsyncClient\"></xref>, respectively.\n </p>"
metadata: {}
package: "com.azure.monitor.ingestion"
artifact: com.azure:azure-monitor-ingestion:1.2.1
