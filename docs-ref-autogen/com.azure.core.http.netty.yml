### YamlMime:JavaPackage
uid: "com.azure.core.http.netty"
fullName: "com.azure.core.http.netty"
name: "com.azure.core.http.netty"
summary: "<p>\n <a href=\"https://learn.microsoft.com/java/api/overview/azure/core-http-netty-readme?view=azure-java-stable\">\n Azure Core Http Netty</a> client library is a plugin for the azure-core HTTP client API."
classes:
- "com.azure.core.http.netty.NettyAsyncHttpClientBuilder"
- "com.azure.core.http.netty.NettyAsyncHttpClientProvider"
desc: "<p>\n <a href=\"https://learn.microsoft.com/java/api/overview/azure/core-http-netty-readme?view=azure-java-stable\">\n Azure Core Http Netty</a> client library is a plugin for the azure-core HTTP client API. It allows you to use Netty\n as\n the underlying HTTP client for communicating with Azure services. It is the default HTTP client used in all\n Azure SDK for Java libraries, but you can also replace it with other implementations such as OkHttp or\n the JDK 11 HttpClient. You can also configure various aspects of the Netty client, such as proxy, protocol, or\n chunk size. For more details refer to our\n <a href=\"https://learn.microsoft.com/azure/developer/java/sdk/http-client-pipeline#http-clients\">conceptual\n documentation</a>.\n </p>\n\n <p>\n <strong>Sample: Construct NettyAsyncHttpClient with Default Configuration</strong>\n </p>\n\n <p>\n The following code sample demonstrates the creation of a Netty HttpClient that uses port 80 and has no proxy.\n </p>\n\n <!-- src_embed readme-sample-createBasicClient -->\n <pre>\n HttpClient client = new NettyAsyncHttpClientBuilder&#40;&#41;.build&#40;&#41;;\n </pre>\n <!-- end readme-sample-createBasicClient -->\n\n <hr>\n\n <h2><strong>Using NettyAsyncHttpClient with Http Proxy</strong></h2>\n\n <p>\n Configuring the Netty client with a proxy in the context of Azure Java SDK is relevant when your application needs\n to communicate with Azure services through a proxy server. For more details refer to our\n <a href=\"https://learn.microsoft.com/azure/developer/java/sdk/proxying#http-proxy-configuration\">conceptual\n documentation</a>.\n </p>\n\n <p>\n The following code sample demonstrates the creation of a Netty HttpClient that is using a proxy.\n </p>\n\n <!-- src_embed readme-sample-createProxyClient -->\n <pre>\n HttpClient client = new NettyAsyncHttpClientBuilder&#40;&#41;\n     .proxy&#40;new ProxyOptions&#40;ProxyOptions.Type.HTTP, new InetSocketAddress&#40;&quot;&lt;proxy-host&gt;&quot;, 8888&#41;&#41;&#41;\n     .build&#40;&#41;;\n </pre>\n <!-- end readme-sample-createProxyClient -->\n\n <hr>\n\n <h2><strong>Using NettyAsyncHttpClient with HTTP/2 Support</strong></h2>\n\n <p>\n The following code sample demonstrates the creation of a Netty HttpClient that supports both the HTTP/1.1 and\n HTTP/2 protocols, with HTTP/2 being the preferred protocol.\n </p>\n\n <!-- src_embed readme-sample-useHttp2WithConfiguredNettyClient -->\n <pre>\n &#47;&#47; Constructs an HttpClient that supports both HTTP&#47;1.1 and HTTP&#47;2 with HTTP&#47;2 being the preferred protocol.\n HttpClient client = new NettyAsyncHttpClientBuilder&#40;reactor.netty.http.client.HttpClient.create&#40;&#41;\n     .protocol&#40;HttpProtocol.HTTP11, HttpProtocol.H2&#41;&#41;\n     .build&#40;&#41;;\n </pre>\n <!-- end readme-sample-useHttp2WithConfiguredNettyClient -->\n\n <p>\n It is also possible to create a Netty HttpClient that only supports HTTP/2.\n </p>\n\n <!-- src_embed readme-sample-useHttp2OnlyWithConfiguredNettyClient -->\n <pre>\n &#47;&#47; Constructs an HttpClient that only supports HTTP&#47;2.\n HttpClient client = new NettyAsyncHttpClientBuilder&#40;reactor.netty.http.client.HttpClient.create&#40;&#41;\n     .protocol&#40;HttpProtocol.H2&#41;&#41;\n     .build&#40;&#41;;\n </pre>\n <!-- end readme-sample-useHttp2OnlyWithConfiguredNettyClient -->\n\n <hr>\n\n <h2>Using NettyAsyncHttpClient with Custom Max Chunk Size</h2>\n\n <p>\n The adjustment of the max chunk size involves the modification of the maximum size of ByteBufs returned by Netty,\n subsequently converted to <code>ByteBuffer</code>. Altering the chunk size can yield positive performance effects,\n particularly\n notable in APIs like the download to file methods within Azure Storage libraries such as azure-storage-blob,\n azure-storage-file-datalake, and azure-storage-file-shares. Notably, improvements in performance have been\n consistently observed in the range of 32KB to 64KB.\n </p>\n\n <p>\n The following code sample demonstrates the creation of a Netty HttpClient that uses a custom max chunk size.\n </p>\n\n <!-- src_embed readme-sample-customMaxChunkSize -->\n <pre>\n &#47;&#47; Constructs an HttpClient with a modified max chunk size.\n &#47;&#47; Max chunk size modifies the maximum size of ByteBufs returned by Netty &#40;later converted to ByteBuffer&#41;.\n &#47;&#47; Changing the chunk size can positively impact performance of APIs such as Storage's download to file methods\n &#47;&#47; provided in azure-storage-blob, azure-storage-file-datalake, and azure-storage-file-shares &#40;32KB - 64KB have\n &#47;&#47; shown the most consistent improvement&#41;.\n HttpClient httpClient = new NettyAsyncHttpClientBuilder&#40;reactor.netty.http.client.HttpClient.create&#40;&#41;\n     .httpResponseDecoder&#40;httpResponseDecoderSpec -&gt; httpResponseDecoderSpec.maxChunkSize&#40;64 * 1024&#41;&#41;&#41;\n     .build&#40;&#41;;\n </pre>\n <!-- end readme-sample-customMaxChunkSize -->"
metadata: {}
package: "com.azure.core.http.netty"
artifact: com.azure:azure-core-http-netty:1.15.0
