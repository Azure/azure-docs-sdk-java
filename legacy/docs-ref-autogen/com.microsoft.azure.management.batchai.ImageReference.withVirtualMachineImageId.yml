### YamlMime:JavaMember
nameWithType: ImageReference.withVirtualMachineImageId
type: method
members:
- fullName: com.microsoft.azure.management.batchai.ImageReference.withVirtualMachineImageId(String virtualMachineImageId)
  name: withVirtualMachineImageId(String virtualMachineImageId)
  nameWithType: ImageReference.withVirtualMachineImageId(String virtualMachineImageId)
  parameters:
  - description: <p>the virtualMachineImageId value to set </p>
    name: virtualMachineImageId
    type: <xref href="String?alt=String&text=String" data-throw-if-not-resolved="False"/>
  returns:
    description: <p>the ImageReference object itself. </p>
    type: <xref href="com.microsoft.azure.management.batchai.ImageReference?alt=com.microsoft.azure.management.batchai.ImageReference&text=ImageReference" data-throw-if-not-resolved="False"/>
  summary: >-
    <p>Set the ARM resource identifier of the virtual machine image for the compute nodes. This is of the form /subscriptions/{subscriptionId}/resourceGroups/{resourceGroup}/providers/Microsoft.Compute/images/{imageName}. The virtual machine image must be in the same region and subscription as the cluster. For information about the firewall settings for the Batch node agent to communicate with the Batch service see <a href="https://docs.microsoft.com/en-us/azure/batch/batch-api-basics#virtual-network-vnet-and-firewall-configuration">https://docs.microsoft.com/en-us/azure/batch/batch-api-basics#virtual-network-vnet-and-firewall-configuration</a>. Note, you need to provide publisher, offer and sku of the base OS image of which the custom image has been derived from.</p>

    <p></p>
  syntax: public ImageReference withVirtualMachineImageId(String virtualMachineImageId)
  uid: com.microsoft.azure.management.batchai.ImageReference.withVirtualMachineImageId(String)
uid: com.microsoft.azure.management.batchai.ImageReference.withVirtualMachineImageId*
fullName: com.microsoft.azure.management.batchai.ImageReference.withVirtualMachineImageId(String virtualMachineImageId)
name: withVirtualMachineImageId(String virtualMachineImageId)
package: com.microsoft.azure.management.batchai
metadata: {}
