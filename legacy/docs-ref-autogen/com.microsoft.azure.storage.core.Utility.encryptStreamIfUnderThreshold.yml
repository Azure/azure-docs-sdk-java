### YamlMime:JavaMember
nameWithType: Utility.encryptStreamIfUnderThreshold
type: method
members:
- fullName: com.microsoft.azure.storage.core.Utility.encryptStreamIfUnderThreshold(final InputStream sourceStream, final ByteArrayOutputStream targetStream, Cipher cipher, long writeLength, long abandonLength)
  name: encryptStreamIfUnderThreshold(final InputStream sourceStream, final ByteArrayOutputStream targetStream, Cipher cipher, long writeLength, long abandonLength)
  nameWithType: Utility.encryptStreamIfUnderThreshold(final InputStream sourceStream, final ByteArrayOutputStream targetStream, Cipher cipher, long writeLength, long abandonLength)
  parameters:
  - description: <p>A <code>InputStream</code> object that represents the stream to measure. </p>
    name: sourceStream
    type: <xref href="final+InputStream?alt=final+InputStream&text=final+InputStream" data-throw-if-not-resolved="False"/>
  - description: <p>A <code>ByteArrayOutputStream</code> object that represents the stream to write the encrypted data. </p>
    name: targetStream
    type: <xref href="final+ByteArrayOutputStream?alt=final+ByteArrayOutputStream&text=final+ByteArrayOutputStream" data-throw-if-not-resolved="False"/>
  - description: <p>The <code>Cipher</code> to use to encrypt the data. </p>
    name: cipher
    type: <xref href="Cipher?alt=Cipher&text=Cipher" data-throw-if-not-resolved="False"/>
  - description: <p>The number of bytes to read and encrypt from the sourceStream. </p>
    name: writeLength
    type: <xref href="long?alt=long&text=long" data-throw-if-not-resolved="False"/>
  - description: <p>The number of bytes to read before the analysis is abandoned. Set this value to <code>-1</code> to force the entire stream to be read. This parameter is provided to support upload thresholds. </p>
    name: abandonLength
    type: <xref href="long?alt=long&text=long" data-throw-if-not-resolved="False"/>
  exceptions:
  - type: <xref href="IOException?alt=IOException&text=IOException" data-throw-if-not-resolved="False"/>
    description: <p>If an I/O error occurs. </p>
  returns:
    description: <p>The size of the encrypted stream, or -1 if the encrypted stream would be over the abandonLength. </p>
    type: <xref href="long?alt=long&text=long" data-throw-if-not-resolved="False"/>
  summary: >-
    <p>Encrypts an input stream up to a given length. Exits early if the encrypted data is longer than the abandon length.</p>

    <p></p>
  syntax: public static long encryptStreamIfUnderThreshold(final InputStream sourceStream, final ByteArrayOutputStream targetStream, Cipher cipher, long writeLength, long abandonLength)
  uid: com.microsoft.azure.storage.core.Utility.encryptStreamIfUnderThreshold(final InputStream,final ByteArrayOutputStream,Cipher,long,long)
uid: com.microsoft.azure.storage.core.Utility.encryptStreamIfUnderThreshold*
fullName: com.microsoft.azure.storage.core.Utility.encryptStreamIfUnderThreshold
name: encryptStreamIfUnderThreshold(final InputStream sourceStream, final ByteArrayOutputStream targetStream, Cipher cipher, long writeLength, long abandonLength)
package: com.microsoft.azure.storage.core
metadata: {}
